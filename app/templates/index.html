{% extends "base.html" %}

{% block head %}
<title>Main Page</title>
{% endblock %} 

{% block body%}
    <div class="card text-center shadow p-3">
        {% if current_user.is_authenticated %}        
            <div class="card-body">
                <h2 class="card-title">Welcome, {{current_user.username}}</h2>
                <h5 class="card-text">You can now edit the Database</h5>
                <br>
                <a href="{{ url_for('student.student')}}" class="btn btn-secondary btn-lg rounded-4 px-4 mx-3">Student</a>
                <a href="{{ url_for('course.course')}}" class="btn btn-secondary btn-lg rounded-4 px-4 mx-3">Course</a>
                <a href="{{ url_for('college.college')}}" class="btn btn-secondary btn-lg rounded-4 px-4 mx-3">College</a>
            </div>
        {% else %}
            <div class="card-body">
                <h2 class="card-title">Hello, Guest</h2>
                <h5 class="card-text">Log in to edit data</h5>
                <br>
                <a href="{{ url_for('user.login_page')}}" class="btn btn-secondary btn-lg rounded-4 px-4 mx-3">Log in</a>
                <a href="{{ url_for('user.register_page')}}" class="btn btn-secondary btn-lg rounded-4 px-4 mx-3">Register</a>
            </div>
        {% endif %}
    </div>

    <div class="row">
        <div class="card mt-5 mx-auto rounded-4 col-2">
            <div class="card-body text-center">
                <h3 class="card-title">Total Students</h3>
                <h4> {{ total_students }} </h4>
            </div>
        </div>

        <div class="card mt-5 mx-auto rounded-4 col-2">
            <div class="card-body text-center">
                <h3 class="card-title">Total Courses</h3>
                <h4> {{ total_courses }} </h4>
            </div>
        </div>

        <div class="card mt-5 mx-auto rounded-4 col-2">
            <div class="card-body text-center">
                <h3 class="card-title">Total Colleges</h3>
                <h4> {{ total_colleges }} </h4>
            </div>
        </div>
    </div>
    

    <div class="card mt-5 mx-auto rounded-4" style="width: 80rem;">
        <div class="card-body">
            <h3 class="card-title">Student Table</h3>
            <div class="table-responsive table-container m-4 text-center" style="max-height: 400px;">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr class="align-middle">
                            <th style="color: gray;">#</th>
                            <th>Image</th>
                            <th>Student ID</th>
                            <th>First Name</th>
                            <th>Last Name</th>
                            <th>Gender</th>
                            <th>Year Level</th>
                            <th>Course</th>
                        </tr>
                    </thead>
                    <tbody id="table-body" data-url="/index/student/table" data-table="student">
                        <tr class="align-middle">
                            <td colspan="8">
                                <div class="text-muted fs-3">
                                    <i class="bi bi-info-circle"></i> No Students found.
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="card mt-5 mx-auto rounded-4" style="width: 80rem;">
        <div class="card-body">
            <h3 class="card-title">Course Table</h3>
            <div class="table-responsive table-container m-4 text-center" style="max-height: 400px;">
                <table class="table table-striped table-hover" >
                    <thead>
                        <tr>
                            <th>Course Code</th>
                            <th>Course Name</th>
                            <th>College</th>
                        </tr>
                    </thead>
                    <tbody id="table-body" data-url="/index/program/table" data-table="college">
                        <tr class="align-middle">
                            <td colspan="8">
                                <div class="text-muted fs-3">
                                    <i class="bi bi-info-circle"></i> No Courses found.
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="card mt-5 mx-auto rounded-4" style="width: 80rem;">
        <div class="card-body">
            <h3 class="card-title">Course Table</h3>
            <div class="table-responsive table-container m-4 text-center" style="max-height: 400px;">
                <table class="table table-striped table-hover" >
                    <thead>
                        <tr>
                            <th>College Code</th>
                            <th>College Name</th>
                        </tr>
                    </thead>
                    <tbody id="table-body" data-url="/index/college/table" data-table="college">
                        <tr class="align-middle">
                            <td colspan="8">
                                <div class="text-muted fs-3">
                                    <i class="bi bi-info-circle"></i> No Colleges found.
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script type="module" src="{{ url_for('static', filename='js/utils/fetch_table.js') }}"></script>
{% endblock %}